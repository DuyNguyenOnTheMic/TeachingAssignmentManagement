var popup,dataTable,rootUrl=$("#loader").data("request-url");function refreshTable(){dataTable.ajax.reload(null,!1)}function disableButtons(e){!0===e?($(".createNew").prop("disabled",!0),$(".editRow").each((function(){this.style.pointerEvents="none"})),$(".deleteRow").each((function(){this.style.pointerEvents="none"}))):($(".createNew").prop("disabled",!1),$(".editRow").each((function(){this.style.pointerEvents="auto"})),$(".deleteRow").each((function(){this.style.pointerEvents="auto"})))}function popupForm(e){var t=$("<div/>");$.get(e).done((function(e){t.html(e),popup=t.dialog({autoOpen:!0,resizable:!1,title:"Quản lý cấp bậc",width:550,open:function(){$(this).closest(".ui-dialog").find(".ui-dialog-titlebar-close").addClass("btn-close"),disableButtons(!0)},close:function(){popup.dialog("destroy").remove(),disableButtons(!1)}})}))}function submitForm(e){return $.validator.unobtrusive.parse(e),$(e).valid()&&$.ajax({type:"POST",url:e.action,data:$(e).serialize(),success:function(e){e.success?(popup.dialog("close"),refreshTable(),toastr.success(e.message)):Swal.fire({title:"Thông báo",text:e.message,icon:"error",customClass:{confirmButton:"btn btn-primary"},buttonsStyling:!1})}}),!1}function deleteAcademicDegreeRank(e){Swal.fire({title:"Thông báo",text:"Bạn có chắc muốn xoá cấp bậc này?",icon:"warning",showCancelButton:!0,cancelButtonText:"Huỷ",confirmButtonText:"Xoá",customClass:{confirmButton:"btn btn-primary",cancelButton:"btn btn-outline-danger ms-1"},buttonsStyling:!1}).then((t=>{t.isConfirmed&&$.ajax({type:"POST",url:rootUrl+"Remuneration/DeleteAcademicDegreeRank/"+e,success:function(e){e.success?(refreshTable(),toastr.success(e.message)):Swal.fire({title:"Thông báo",text:e.message,icon:"error",customClass:{confirmButton:"btn btn-primary"},buttonsStyling:!1})}})}))}$((function(){"use strict";(dataTable=$("#tblAcademicDegreeRank").DataTable({ajax:{url:rootUrl+"Remuneration/GetAcademicDegreeRankData",type:"GET",dataType:"json",dataSrc:""},deferRender:!0,columns:[{data:"id"},{data:"group"},{data:"id",render:function(e){return"<a class='editRow text-success p-0' data-original-title='Chỉnh sửa' title='Chỉnh sửa' onclick=popupForm('"+rootUrl+"Remuneration/EditAcademicDegreeRank/"+e+"')><i class='feather feather-edit font-medium-3 me-1'></i></a><a class='deleteRow text-danger p-0' data-original-title='Xoá' title='Xoá' onclick=deleteAcademicDegreeRank('"+e+"') ><i class='feather feather-trash-2 font-medium-3 me-1'></i></a>"}}],columnDefs:[{searchable:!1,orderable:!1,className:"text-center",targets:2},{visible:!1,targets:1},{className:"ps-5",targets:0},{width:"15%",targets:2}],order:[[1,"desc"]],dom:'<"d-flex justify-content-between align-items-center header-actions mx-2 row mt-75"<"col-sm-12 col-lg-4 d-flex justify-content-center justify-content-lg-start" l><"col-sm-12 col-lg-8 ps-xl-75 px-0"<"dt-action-buttons d-flex align-items-center justify-content-center justify-content-lg-end flex-lg-nowrap flex-wrap"<"me-1"f>B>>>t<"d-flex justify-content-between mx-2 row mb-1"<"col-sm-12 col-md-6"i><"col-sm-12 col-md-6"p>>',displayLength:25,lengthMenu:[[25,50,-1],[25,50,"tất cả"]],buttons:[{text:feather.icons.plus.toSvg({class:"me-50 font-small-4"})+"Thêm cấp bậc mới",className:"createNew btn btn-primary",attr:{onclick:"popupForm('"+rootUrl+"Remuneration/CreateAcademicDegreeRank')"},init:function(e,t,a){$(t).removeClass("btn-secondary"),$(t).parent().removeClass("btn-group"),setTimeout((function(){$(t).closest(".dt-buttons").removeClass("btn-group").addClass("d-inline-flex mt-50")}),50)}}],drawCallback:function(e){var t=this.api(),a=t.rows({page:"current"}).nodes(),n=null;t.column(1,{page:"current"}).data().each((function(e,t){n!==e&&($(a).eq(t).before('<tr class="group"><td class="fw-bold" colspan="2">'+e+"</td></tr>"),n=e)}))},language:{url:rootUrl+"app-assets/language/datatables/vi.json"}})).on("draw.dt",(function(){!0===$(".ui-dialog-content").dialog("isOpen")?disableButtons(!0):disableButtons(!1)})),$("#tblAcademicDegreeRank tbody").on("click","tr.group",(function(){var e=dataTable.order()[0];1===e[0]&&"asc"===e[1]?dataTable.order([1,"desc"]).draw():dataTable.order([1,"asc"]).draw()}))}));