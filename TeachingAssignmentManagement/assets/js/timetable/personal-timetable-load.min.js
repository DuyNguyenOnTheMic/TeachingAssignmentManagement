var termSelect=$("#term"),weekSelect=$("#week"),rootUrl=$("#loader").data("request-url"),personalTimetableDiv=$("#personalTimetableDiv"),url=rootUrl+"Timetable/GetPersonalData";function loading(){personalTimetableDiv.html('<div class="d-flex justify-content-center mt-2"><div class="spinner-border text-primary me-1" role="status"><span class="visually-hidden">Loading...</span></div><p class="my-auto">Đang tải...</p></div>'),$("[data-bs-toggle='tooltip']").tooltip("dispose")}function fetchData(e,t){$.get(url,{termId:e,week:t},(function(e){e.error?(personalTimetableDiv.html('<h4 class="text-center mt-2">'+e.message+'</h4><div class="card-body"><img class="mx-auto p-3 d-block w-50" alt="No data" src="'+rootUrl+'assets/images/img_no_data.svg"></div>'),weekSelect.parent().find(".select2-selection__placeholder").text("không khả dụng")):personalTimetableDiv.html(e)}))}$((function(){$(".form-select").each((function(){var e=$(this);e.wrap('<div class="position-relative"></div>'),e.select2({language:"vi",dropdownAutoWidth:!0,dropdownParent:e.parent(),placeholder:e[0][0].innerHTML})}));var e=$("#term option:last-child").val();e?(termSelect.val(e).trigger("change"),fetchData(e,0)):(personalTimetableDiv.html('<h4 class="text-center mt-2">Chưa có dữ liệu học kỳ</h4><div class="card-body"><img class="mx-auto p-3 d-block w-50" alt="No data" src="'+rootUrl+'assets/images/img_no_data.svg"></div>'),weekSelect.parent().find(".select2-selection__placeholder").text("không khả dụng"))})),termSelect.change((function(){weekSelect.empty();var e=$(this).val();loading(),fetchData(e,0)})),weekSelect.change((function(){var e=termSelect.val(),t=$(this).val();loading(),fetchData(e,t)}));