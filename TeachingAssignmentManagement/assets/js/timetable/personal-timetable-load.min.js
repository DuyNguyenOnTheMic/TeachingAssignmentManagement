var termSelect=$("#term"),weekSelect=$("#week"),rootUrl=$("#loader").data("request-url"),personalTimetableDiv=$("#personalTimetableDiv"),url=rootUrl+"Timetable/GetPersonalData";function loading(){showLoading(personalTimetableDiv),$("[data-bs-toggle='tooltip']").tooltip("dispose")}function fetchData(e,t){$.get(url,{termId:e,week:t},(function(e){e.error?(personalTimetableDiv.html('<h4 class="text-center mt-2">'+e.message+'</h4><div class="card-body"><img class="mx-auto p-3 d-block w-50" alt="No data" src="'+rootUrl+'assets/images/img_no_data.svg"></div>'),weekSelect.parent().find(".select2-selection__placeholder").text("không khả dụng")):personalTimetableDiv.html(e)}))}$((function(){var e=$(".form-select"),t=$("#term option:eq(1)").val();termSelect.val(t),e.each((function(){var e=$(this);e.wrap('<div class="position-relative"></div>'),e.select2({language:"vi",dropdownAutoWidth:!0,dropdownParent:e.parent(),placeholder:e[0][0].innerHTML})})),t?fetchData(t,0):(personalTimetableDiv.html('<h4 class="text-center mt-2">Chưa có dữ liệu học kỳ</h4><div class="card-body"><img class="mx-auto p-3 d-block w-50" alt="No data" src="'+rootUrl+'assets/images/img_no_data.svg"></div>'),weekSelect.parent().find(".select2-selection__placeholder").text("không khả dụng"))})),termSelect.change((function(){weekSelect.empty();var e=$(this).val();loading(),fetchData(e,0)})),weekSelect.change((function(){var e=termSelect.val(),t=$(this).val();loading(),fetchData(e,t)}));