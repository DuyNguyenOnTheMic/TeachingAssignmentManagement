var unitSelect=$("#unit"),termSelect=$("#term"),yearSelect=$("#year"),lecturerTypeSelect=$("#lecturerType"),formTermYear=$(".form-termyear"),rootUrl=$("#loader").data("request-url"),statisticsDiv=$("#statisticsDiv"),latestTermId=$("#term option:eq(1)").val(),latestYearId=$("#year option:eq(1)").val();function loading(){statisticsDiv.html('<div class="d-flex justify-content-center mt-2"><div class="spinner-border text-primary me-1" role="status"><span class="visually-hidden">Loading...</span></div><p class="my-auto">Đang tải...</p></div>')}function fetchData(e,t,a){var r=rootUrl+"Statistics/GetChart";$.get(r,{type:e,value:t,lecturerType:a},(function(e){statisticsDiv.html(e)}))}$((function(){var e=$(".form-select");termSelect.val(latestTermId),e.each((function(){var e=$(this);e.wrap('<div class="position-relative"></div>'),e.select2({language:"vi",dropdownAutoWidth:!0,dropdownParent:e.parent(),placeholder:e[0][0].innerHTML})})),latestTermId?fetchData(termSelect.attr("id"),latestTermId,lecturerTypeSelect.val()):statisticsDiv.html('<h4 class="text-center mt-2">Chưa có dữ liệu học kỳ</h4><div class="card-body"><img class="mx-auto p-3 d-block w-50" alt="No data" src="'+rootUrl+'assets/images/img_no_data.svg"></div>')})),unitSelect.change((function(){"term"==$(this).val()?(termSelect.val(latestTermId).trigger("change"),$("#termDiv").show(),$("#yearDiv").hide()):(yearSelect.val(latestYearId).trigger("change"),$("#yearDiv").show(),$("#termDiv").hide())})),formTermYear.change((function(){var e=$(this),t=e.attr("id"),a=e.val(),r=lecturerTypeSelect.val();loading(),fetchData(t,a,r)})),lecturerTypeSelect.change((function(){var e,t,a=$(this);termSelect.is(":visible")?(e=termSelect.attr("id"),t=termSelect.val()):(e=yearSelect.attr("id"),t=yearSelect.val()),loading(),fetchData(e,t,a.val())}));