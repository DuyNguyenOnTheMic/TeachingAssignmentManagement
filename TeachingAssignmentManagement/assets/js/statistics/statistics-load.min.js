var unitSelect=$("#unit"),termSelect=$("#term"),yearSelect=$("#year"),majorSelect=$("#major"),isLessonCheck=$("#isLesson"),lecturerTypeSelect=$("#lecturerType"),formData=$(".form-data"),rootUrl=$("#loader").data("request-url"),statisticsDiv=$("#statisticsDiv"),latestTermId=$("#term option:eq(1)").val(),latestYearId=$("#year option:eq(1)").val(),latestMajorId=$("#major option:eq(1)").val();function fetchData(e,t,a,r,i){var l=rootUrl+"Statistics/GetChart";$.get(l,{isLesson:e,type:t,value:a,major:r,lecturerType:i},(function(e){statisticsDiv.html(e)}))}$((function(){var e=$(".form-select");termSelect.val(latestTermId),majorSelect.val(latestMajorId),$("#major option:first").after('<option value="-1">Tất cả</option>'),e.each((function(){var e=$(this);e.wrap('<div class="position-relative"></div>'),e.select2({language:"vi",dropdownAutoWidth:!0,dropdownParent:e.parent(),placeholder:e[0][0].innerHTML})})),latestTermId&&latestMajorId?fetchData(!1,termSelect.attr("id"),latestTermId,latestMajorId,lecturerTypeSelect.val()):showNoData(statisticsDiv,"học kỳ")})),unitSelect.change((function(){"term"==$(this).val()?($("#termDiv").show(),$("#yearDiv").hide(),termSelect.val(latestTermId).trigger("change")):($("#yearDiv").show(),$("#termDiv").hide(),yearSelect.val(latestYearId).trigger("change"))})),formData.change((function(){var e,t,a,r,i;e=!!isLessonCheck.is(":checked"),termSelect.is(":visible")?(t=termSelect.attr("id"),a=termSelect.val()):(t=yearSelect.attr("id"),a=yearSelect.val()),r=majorSelect.val(),i=lecturerTypeSelect.val(),showLoading(statisticsDiv),fetchData(e,t,a,r,i)}));